<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© | Ø£Ø­Ø¯Ø« Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</title>
  <meta name="description" content="Ù…Ø¹Ø±Ø¶ Ø§Ù„ØºØ§Ù†Ù… Ù„Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© - ØªØµÙØ­ Ø£Ø­Ø¯Ø« Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ø§Ø®ØªØ± Ø§Ù„Ø£Ù†Ø³Ø¨ Ù„ÙƒØŒ ÙˆØ§Ø±Ø³ÙÙ„ Ø·Ù„Ø¨Ùƒ ÙÙˆØ±Ø§Ù‹ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨." />
  <meta name="theme-color" content="#25D366" />

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --wa: #16a34a;
      --primary: #374151;
      --primary-light: #6b7280;
      --primary-dark: #1f2937;
      --secondary: #64748b;
      --accent: #059669;
      --dark: #0f172a;
      --muted: #64748b;
      --gradient-start: #374151;
      --gradient-end: #1f2937;
      --card-bg: #ffffff;
      --border-light: #e5e7eb;
    }
    * { transition: all .25s ease; }
    @media (prefers-reduced-motion: reduce) { * { transition: none !important; animation: none !important; } }

    body { 
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
      background: #ffffff;
      font-size: 16px; /* Prevent zoom on iOS */
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      touch-action: manipulation; /* Improve touch response */
    }
    .btn-wa { 
      background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); 
      border: none; 
      color: #fff;
      box-shadow: 0 4px 15px rgba(22, 163, 74, 0.3);
      min-height: 48px; /* Touch-friendly button size */
      font-size: 1.1rem;
      font-weight: 600;
    }
    .btn-wa:hover { 
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(22, 163, 74, 0.4);
    }
    .btn-primary { 
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); 
      border: none;
      box-shadow: 0 4px 15px rgba(55, 65, 81, 0.3);
      min-height: 48px; /* Touch-friendly button size */
      font-size: 1.1rem;
      font-weight: 600;
    }
    .btn-primary:hover { 
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(55, 65, 81, 0.4);
    }

    .hero {
      position: relative; min-height: 85vh; display: grid; place-items: center;
      color: #fff; text-align: center; overflow: hidden; 
      background: #1f2937; /* Fallback color */
    }
    @media (max-width: 768px) {
      .hero {
        min-height: 75vh;
        padding: 2rem 0;
      }
      .hero h1 {
        font-size: 1.8rem !important;
        line-height: 1.3;
        margin-bottom: 1rem !important;
      }
      .hero .lead {
        font-size: 1rem !important;
        margin-bottom: 2rem !important;
      }
    }
    .hero-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 1;
    }
    .hero::before { 
      content:""; position:absolute; inset:0; z-index: 2;
      background: radial-gradient(circle at 30% 70%, rgba(0,0,0,0.3) 0%, transparent 50%),
                  radial-gradient(circle at 70% 30%, rgba(0,0,0,0.2) 0%, transparent 50%);
    }
    .hero::after { 
      content:""; position:absolute; inset:0; z-index: 3;
      background: linear-gradient(135deg, rgba(31, 41, 55, 0.7) 0%, rgba(17, 24, 39, 0.6) 100%);
    }
    .hero > .content { position: relative; z-index: 4; }
    .hero h1 { font-weight: 800; letter-spacing: -0.02em; }
    .navbar {
      background: rgba(255, 255, 255, 0.95) !important;
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border-light);
    }
    .navbar-brand {
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--accent) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 800;
    }
    .section-title { 
      font-weight: 800; 
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .badge-new { 
      background: linear-gradient(135deg, var(--accent) 0%, var(--primary-light) 100%); 
      color: white;
      font-weight: 600;
    }
    .badge-used { background: #a78bfa; }
    .shadow-soft { 
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08), 0 10px 20px rgba(0, 0, 0, 0.05); 
    }
    .list-hero li { color: #e2e8f0; }
    .contact-photo { width: 112px; height: 112px; object-fit: cover; border-radius: 999px; border: 4px solid #fff; }
    .whatsapp-chip { 
      display: inline-flex; align-items: center; gap: .5rem; 
      background: linear-gradient(135deg, rgba(22, 163, 74, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%); 
      color: var(--accent); 
      padding: .5rem 1rem; border-radius: 999px; font-weight: 600; font-size: .9rem;
      border: 1px solid rgba(22, 163, 74, 0.2);
    }
    .whatsapp-chip svg { width: 18px; height: 18px; }
    .map-embed { border: 0; width: 100%; height: 260px; border-radius: 1rem; }

    /* Mobile-optimized card design */
    .car-card { 
      border: none; border-radius: 1rem; overflow: hidden; 
      background: #ffffff;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      border: 1px solid #f1f5f9;
      margin-bottom: 1.5rem;
    }
    .car-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
    }
    @media (max-width: 768px) {
      .car-card {
        margin-bottom: 1rem;
        border-radius: 0.75rem;
      }
      .car-card:hover {
        transform: translateY(-2px);
      }
    }
    .car-card .img-wrap{
      position: relative; width: 100%; aspect-ratio: 16 / 9; overflow: hidden;
      background: #f3f4f6;
    }
    .car-card .img-wrap img{
      width: 100%; height: 100%; object-fit: cover; display: block; transition: transform .4s ease;
      background: #f8f9fa;
    }
    .car-card .img-wrap img[src$=".avif"] {
      image-rendering: auto;
    }
    .car-card:hover .img-wrap img{ transform: scale(1.04); }

    .price-badge{
      position: absolute; right: 1rem; bottom: 1rem;
      background: linear-gradient(135deg, rgba(31, 41, 55, 0.9) 0%, rgba(17, 24, 39, 0.9) 100%); 
      color: #fff; padding: .5rem .8rem;
      border-radius: .75rem; font-weight: 700; font-size: 1rem; 
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    @media (max-width: 768px) {
      .price-badge {
        font-size: 0.9rem;
        padding: 0.4rem 0.7rem;
        right: 0.75rem;
        bottom: 0.75rem;
      }
    }
    .car-card .card-body{ display:flex; flex-direction:column; }
    .car-card .buy-wrap{ margin-top:auto; }

    /* Floating WhatsApp Button - Mobile Optimized */
    .fab-wa {
      position: fixed; right: 20px; bottom: 20px; z-index: 1100;
      display: inline-flex; align-items: center; justify-content: center;
      width: 60px; height: 60px; border-radius: 999px; color: #fff;
      background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
      box-shadow: 0 15px 35px rgba(22, 163, 74, 0.3), 0 8px 15px rgba(0, 0, 0, 0.1);
      transition: all .3s ease;
      text-decoration: none;
    }
    .fab-wa:hover { 
      transform: translateY(-4px) scale(1.05); 
      box-shadow: 0 20px 40px rgba(22, 163, 74, 0.4), 0 10px 20px rgba(0, 0, 0, 0.15); 
      color: #fff;
    }
    .fab-wa svg { width: 28px; height: 28px; }
    @media (max-width: 768px) {
      .fab-wa {
        width: 56px;
        height: 56px;
        right: 16px;
        bottom: 16px;
      }
      .fab-wa svg { width: 26px; height: 26px; }
    }
    
    /* Mobile-first responsive styles */
    @media (max-width: 768px) {
      .container {
        padding-left: 1rem;
        padding-right: 1rem;
      }
      
      .navbar-brand {
        font-size: 1.2rem;
      }
      
      .section-title {
        font-size: 1.5rem !important;
        margin-bottom: 1rem !important;
      }
      
      .card-body {
        padding: 1rem;
      }
      
      .btn {
        font-size: 1rem;
        padding: 0.75rem 1.5rem;
      }
      
      .btn-lg {
        font-size: 1.1rem;
        padding: 0.875rem 1.75rem;
      }
      
      .whatsapp-chip {
        font-size: 0.85rem;
        padding: 0.4rem 0.8rem;
      }
      
      .list-hero {
        flex-direction: column;
        gap: 0.5rem !important;
        font-size: 0.9rem;
      }
      
      .contact-photo {
        width: 80px;
        height: 80px;
      }
      
      .form-control, .form-select {
        font-size: 16px; /* Prevent zoom on iOS */
        padding: 0.75rem;
      }
      
      .modal-body {
        padding: 1rem;
      }
      
      .car-card .card-title {
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
      }
      
      .car-card .card-text {
        font-size: 0.9rem;
        line-height: 1.4;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#">Alghanim MG Kuwait</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="#cars">Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">ØªÙˆØ§ØµÙ„</a></li>
        </ul>
        <a id="ctaWhatsAppTop" class="btn btn-wa ms-lg-3 text-white fw-semibold" target="_blank" rel="noopener">ØªÙˆØ§ØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨</a>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <header class="hero">
    <video class="hero-video" autoplay muted loop playsinline>
      <source src="mg video.mp4" type="video/mp4">
      <source src="mg video.webm" type="video/webm">
      <!-- Fallback for browsers that don't support video -->
      Your browser does not support the video tag.
    </video>
    <div class="content container py-5">
      <div class="mx-auto" style="max-width: 840px;">
        <span class="whatsapp-chip mb-3">
          <svg viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M19.11 17.19c-.3-.15-1.76-.86-2.03-.96-.27-.1-.47-.15-.67.15-.2.3-.77.96-.95 1.16-.17.2-.35.22-.65.07-.3-.15-1.28-.47-2.44-1.5-.9-.8-1.5-1.78-1.67-2.08-.17-.3-.02-.46.13-.61.13-.13.3-.35.45-.52.15-.17.2-.3.3-.5.1-.2.05-.37-.02-.52-.08-.15-.67-1.6-.92-2.2-.24-.58-.49-.5-.67-.5-.17 0-.37-.02-.57-.02-.2 0-.52.07-.8.37-.27.3-1.04 1-1.04 2.44 0 1.44 1.07 2.83 1.22 3.02.15.2 2.1 3.2 5.08 4.48.71.31 1.27.49 1.7.63.71.23 1.36.2 1.88.12.57-.09 1.76-.72 2-1.42.25-.7.25-1.3.17-1.42-.07-.12-.27-.2-.57-.35z"/><path d="M26.87 5.14A12.8 12.8 0 0 0 16 1.33C8.6 1.33 2.6 7.33 2.6 14.74c0 2.34.61 4.64 1.76 6.66L2 30.67l9.45-2.27a13.35 13.35 0 0 0 4.55.78c7.4 0 13.4-6 13.4-13.4 0-3.58-1.39-6.95-3.94-9.43zM16 27.33c-1.38 0-2.75-.26-4.03-.77l-.86-.36-5.6 1.35 1.35-5.36-.38-.88a10.8 10.8 0 0 1-1.16-4.57c0-5.97 4.86-10.8 10.8-10.8 2.88 0 5.58 1.13 7.62 3.17a10.7 10.7 0 0 1 3.17 7.63c0 5.97-4.86 10.8-10.8 10.8z"/></svg>
          Ø±Ø³Ø§Ù„Ø© ÙˆØ§ØªØ³Ø§Ø¨ ÙÙˆØ±ÙŠØ©
        </span>
        <h1 class="display-4 mb-3">ØªÙˆÙƒÙŠÙ„ <span class="text-success">Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ</span> - Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØºØ§Ù†Ù… Ø§Ù„ÙƒÙˆÙŠØª</h1>
        <p class="lead mb-4">Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ ÙˆØ§Ù„Ù…Ø¹ØªÙ…Ø¯ Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø¥Ù… Ø¬ÙŠ ÙÙŠ Ø§Ù„ÙƒÙˆÙŠØª - ØªØµÙØ­ ÙˆØ§Ø®ØªØ± Ù…Ù† Ø£Ø­Ø¯Ø« Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© 2025 ÙˆØ£Ø±Ø³Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ø¶ØºØ·Ø© Ø²Ø± â€” Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø­ØµØ±ÙŠØ©.</p>
        <div class="d-flex gap-3 justify-content-center flex-wrap mb-3">
          <a id="ctaWhatsAppHero" class="btn btn-lg btn-wa text-white fw-semibold px-4" target="_blank" rel="noopener">ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¢Ù†</a>
          <a href="#cars" class="btn btn-outline-light btn-lg fw-semibold px-4">ØªØµÙÙ‘Ø­ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a>
        </div>
        <ul class="list-unstyled d-flex gap-4 mt-4 justify-content-center list-hero">
          <li>âœ” ØªÙˆÙƒÙŠÙ„ Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø­ØµØ±ÙŠ</li>
          <li>âœ” Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯</li>
          <li>âœ” Ø®Ø¯Ù…Ø§Øª Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø±Ø³Ù…ÙŠØ©</li>
        </ul>
      </div>
    </div>
  </header>

  <!-- Cars -->
  <section id="cars" class="py-5" style="background: #ffffff;">
    <div class="container">
      <div class="d-flex align-items-end justify-content-between flex-wrap gap-3 mb-4">
        <div>
          <h2 class="section-title mb-1">ØªÙˆÙƒÙŠÙ„ Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ - Ø£Ø­Ø¯Ø« Ø³ÙŠØ§Ø±Ø§Øª Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© 2025 Ø¨Ø§Ù„ÙƒÙˆÙŠØª</h2>
          <p class="text-secondary mb-0">Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ ÙˆØ§Ù„Ù…Ø¹ØªÙ…Ø¯ - Ø¬Ù…ÙŠØ¹ Ø³ÙŠØ§Ø±Ø§ØªÙ†Ø§ Ø¬Ø¯ÙŠØ¯Ø© 2025 Ø¨Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ. Ø§Ø®ØªØ± Ø³ÙŠØ§Ø±Ø© Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ø¶ØºØ· <strong>Ø§Ø´ØªØ±Ù Ø§Ù„Ø¢Ù†</strong> Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨.</p>
        </div>
        <div class="d-flex gap-2 flex-wrap align-items-center">
          <input id="searchInput" type="search" class="form-control" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…..." style="max-width: 200px; min-width: 150px;">
          <select id="filterSelect" class="form-select" style="max-width: 160px; min-width: 140px;">
            <option value="all">Ø¬Ù…ÙŠØ¹ Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</option>
            <option value="new">Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</option>
            <option value="premium">ÙØ¦Ø© ÙØ§Ø®Ø±Ø©</option>
            <option value="electric">Ø³ÙŠØ§Ø±Ø§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©</option>
          </select>
        </div>
      </div>

      <div id="carsGrid" class="row g-3"></div>
    </div>
  </section>

  <!-- Floating WhatsApp Button -->
  <a id="fabWhatsApp" class="fab-wa" target="_blank" rel="noopener" aria-label="Ø¯Ø±Ø¯Ø´Ø© ÙˆØ§ØªØ³Ø§Ø¨">
    <svg viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M19.11 17.19c-.3-.15-1.76-.86-2.03-.96-.27-.1-.47-.15-.67.15-.2.3-.77.96-.95 1.16-.17.2-.35.22-.65.07-.3-.15-1.28-.47-2.44-1.5-.9-.8-1.5-1.78-1.67-2.08-.17-.3-.02-.46.13-.61.13-.13.3-.35.45-.52.15-.17.2-.3.3-.5.1-.2.05-.37-.02-.52-.08-.15-.67-1.6-.92-2.2-.24-.58-.49-.5-.67-.5-.17 0-.37-.02-.57-.02-.2 0-.52.07-.8.37-.27.3-1.04 1-1.04 2.44 0 1.44 1.07 2.83 1.22 3.02.15.2 2.1 3.2 5.08 4.48.71.31 1.27.49 1.7.63.71.23 1.36.2 1.88.12.57-.09 1.76-.72 2-1.42.25-.7.25-1.3.17-1.42-.07-.12-.27-.2-.57-.35z"/><path d="M26.87 5.14A12.8 12.8 0 0 0 16 1.33C8.6 1.33 2.6 7.33 2.6 14.74c0 2.34.61 4.64 1.76 6.66L2 30.67l9.45-2.27a13.35 13.35 0 0 0 4.55.78c7.4 0 13.4-6 13.4-13.4 0-3.58-1.39-6.95-3.94-9.43zM16 27.33c-1.38 0-2.75-.26-4.03-.77l-.86-.36-5.6 1.35 1.35-5.36-.38-.88a10.8 10.8 0 0 1-1.16-4.57c0-5.97 4.86-10.8 10.8-10.8 2.88 0 5.58 1.13 7.62 3.17a10.7 10.7 0 0 1 3.17 7.63c0 5.97-4.86 10.8-10.8 10.8z"/></svg>
  </a>

  <!-- Contact -->
  <section id="contact" class="py-5" style="background: #ffffff;">
    <div class="container">
      <div class="row g-4 align-items-center">
        <div class="col-lg-6">
          <div class="d-flex align-items-center gap-3 mb-3">
            <img id="contactPhoto" class="contact-photo shadow-soft" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨" src="https://images.unsplash.com/photo-1531123414780-f742b7a5e0a8?q=80&w=600&auto=format&fit=crop" loading="lazy">
            <div>
              <h3 class="mb-1" id="salesName">Ahmed Abdelwahab</h3>
              <div class="text-secondary">Ù…Ø³ØªØ´Ø§Ø± Ù…Ø¨ÙŠØ¹Ø§Øª - ØªÙˆÙƒÙŠÙ„ Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠØŒ Ø§Ù„ÙƒÙˆÙŠØª</div>
            </div>
          </div>
          <p class="text-muted">Ø£Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„ÙˆÙ‡Ø§Ø¨ - Ù…Ø³ØªØ´Ø§Ø± Ù…Ø¨ÙŠØ¹Ø§Øª ÙÙŠ ØªÙˆÙƒÙŠÙ„ Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ Ø¨Ø§Ù„ÙƒÙˆÙŠØª (Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØºØ§Ù†Ù…). Ø£Ø³Ø§Ø¹Ø¯Ùƒ ØªØ®ØªØ§Ø± Ø³ÙŠØ§Ø±Ø© Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ù„Ø®Ø·Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ùƒ Ù…Ø¹ Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ ÙˆØ®Ø¯Ù…Ø§Øª Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø­ØµØ±ÙŠØ©. Ø£Ø±Ø³Ù„ Ø·Ù„Ø¨Ùƒ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¨Ø±Ø¯Ù‘ Ø¹Ù„ÙŠÙƒ Ø¨Ø³Ø±Ø¹Ø© Ø¨Ø§Ù„ØªÙˆØ§ÙØ±ØŒ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©ØŒ ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©.</p>
          <div class="d-flex gap-2 flex-wrap">
            <a id="ctaWhatsAppContact" class="btn btn-wa text-white fw-semibold" target="_blank" rel="noopener">ÙˆØ§ØªØ³Ø§Ø¨</a>
            <a id="ctaCall" class="btn btn-outline-success fw-semibold" target="_blank" rel="noopener">Ø§ØªØµØ§Ù„</a>
            <a id="ctaEmail" class="btn btn-outline-secondary fw-semibold" target="_blank" rel="noopener">Ø¥ÙŠÙ…ÙŠÙ„</a>
          </div>
        </div>
        <div class="col-lg-6">
          <iframe id="mapEmbed" class="map-embed shadow-soft" loading="lazy" allowfullscreen referrerpolicy="no-referrer-when-downgrade" src="https://maps.google.com/maps?q=Kuwait%20City&t=&z=12&ie=UTF8&iwloc=&output=embed"></iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- Purchase Modal - Mobile Optimized -->
  <div class="modal fade" id="purchaseModal" tabindex="-1" aria-labelledby="purchaseLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="purchaseLabel">Ù†Ù…ÙˆØ°Ø¬ Ø´Ø±Ø§Ø¡ Ø³ÙŠØ§Ø±Ø©</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="purchaseForm" class="needs-validation" novalidate>
            <div class="mb-3">
              <label for="carName" class="form-label">Ø§Ù„Ø³ÙŠØ§Ø±Ø©</label>
              <input type="text" id="carName" class="form-control" readonly>
            </div>
            <div class="row g-3">
              <div class="col-sm-6">
                <label for="custName" class="form-label">Ø§Ø³Ù…Ùƒ</label>
                <input type="text" id="custName" class="form-control" placeholder="Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ" required>
                <div class="invalid-feedback">ÙØ¶Ù„Ø§Ù‹ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ.</div>
              </div>
              <div class="col-sm-6">
                <label for="custPhone" class="form-label">Ø±Ù‚Ù…Ùƒ</label>
                <input type="tel" id="custPhone" class="form-control" placeholder="+965 9690 2117" pattern="^[0-9+()\-\s]{7,}$" required>
                <div class="form-text">Ø¥Ø°Ø§ ÙƒÙ†Øª Ø®Ø§Ø±Ø¬ Ø§Ù„ÙƒÙˆÙŠØª Ø¶ÙÙ ÙƒÙˆØ¯ Ø§Ù„Ø¯ÙˆÙ„Ø©.</div>
                <div class="invalid-feedback">ÙØ¶Ù„Ø§Ù‹ Ø§ÙƒØªØ¨ Ø±Ù‚Ù… ØµØ­ÙŠØ­.</div>
              </div>
            </div>

            <div class="mt-3">
              <label class="form-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
              <div class="d-flex gap-3">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="paymentMethod" id="payCash" value="Cash" checked>
                  <label class="form-check-label" for="payCash">ÙƒØ§Ø´</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="paymentMethod" id="payFinance" value="Finance">
                  <label class="form-check-label" for="payFinance">ØªÙ…ÙˆÙŠÙ„</label>
                </div>
              </div>
            </div>

            <div id="financeFields" class="row g-3 mt-1" style="display:none;">
              <div class="col-12">
                <div class="row g-3">
                  <div class="col-sm-4">
                    <label for="bankSelect" class="form-label">Ø´Ø±ÙƒØ© Ø§Ù„ØªÙ…ÙˆÙŠÙ„</label>
                    <select id="bankSelect" class="form-select">
                      <option value="" selected disabled>Ø§Ø®ØªØ± Ø´Ø±ÙƒØ© ØªÙ…ÙˆÙŠÙ„â€¦</option>
                    </select>
                    <div class="invalid-feedback">ÙØ¶Ù„Ø§Ù‹ Ø§Ø®ØªØ± Ø´Ø±ÙƒØ© ØªÙ…ÙˆÙŠÙ„.</div>
                  </div>
                  <div class="col-sm-2">
                    <label for="loanYears" class="form-label">Ø³Ù†ÙˆØ§Øª</label>
                    <select id="loanYears" class="form-select">
                      <option value="" selected disabled>â€”</option>
                    </select>
                    <div class="invalid-feedback">ÙØ¶Ù„Ø§Ù‹ Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†ÙˆØ§Øª.</div>
                  </div>
                  <div class="col-sm-3">
                    <label for="apr" class="form-label">Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© %</label>
                    <input type="number" id="apr" class="form-control" value="" min="0" step="0.1" readonly style="background-color: #f8f9fa;" placeholder="ØªØ­Ø¯Ø¯ Ø­Ø³Ø¨ Ø§Ù„Ø´Ø±ÙƒØ©">
                  </div>
                  <div class="col-sm-3">
                    <label for="downPayment" class="form-label">Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ø¯.Ùƒ)</label>
                    <input type="number" id="downPayment" class="form-control" value="0" min="0" step="100">
                  </div>
                </div>
                <div class="row g-3 mt-1">
                  <div class="col-sm-4">
                    <label for="budget" class="form-label">Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ø´Ù‡Ø±ÙŠÙ‹Ø§ (Ø¯.Ùƒ)</label>
                    <input type="number" id="budget" class="form-control" min="0" step="10">
                  </div>
                  <div class="col-sm-4">
                    <label class="form-label">Ø§Ù„Ù‚Ø³Ø· Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ</label>
                    <input type="text" id="emi" class="form-control" readonly>
                  </div>
                  <div class="col-sm-4">
                    <label class="form-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚</label>
                    <input type="text" id="totalPayable" class="form-control" readonly>
                  </div>
                </div>
                <div class="row g-3 mt-1">
                  <div class="col-sm-4">
                    <label class="form-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­/Ø§Ù„ÙÙˆØ§Ø¦Ø¯</label>
                    <input type="text" id="totalInterest" class="form-control" readonly>
                  </div>
                  <div class="col-sm-8">
                    <label class="form-label">Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</label>
                    <div id="budgetStatus" class="form-control" style="height:auto; min-height: 38px; display:flex; align-items:center;">â€”</div>
                  </div>
                </div>
              </div>
            </div>

            <div class="mt-4 d-grid">
              <button class="btn btn-wa text-white fw-semibold" type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Car Details Modal - Mobile Optimized -->
  <div class="modal fade" id="carDetailsModal" tabindex="-1" aria-labelledby="carDetailsLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-fullscreen-md-down">
      <div class="modal-content">
        <div class="modal-header border-0">
          <h5 class="modal-title" id="carDetailsLabel">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-0">
          <!-- Car Image Gallery -->
          <div id="carImageCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner" id="carouselImages">
              <!-- Images will be populated by JavaScript -->
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carImageCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carImageCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
            <div class="carousel-indicators" id="carouselIndicators">
              <!-- Indicators will be populated by JavaScript -->
            </div>
          </div>
          
          <!-- Car Details Content -->
          <div class="p-4">
            <div class="row">
              <div class="col-lg-8">
                <h3 id="modalCarName" class="mb-3"></h3>
                <div id="modalCarBadge" class="mb-3"></div>
                
                <h5 class="text-success mb-3">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª ÙˆØ§Ù„Ù…Ø²Ø§ÙŠØ§</h5>
                <div id="carFeatures" class="mb-4">
                  <!-- Features will be populated by JavaScript -->
                </div>
                
                <h5 class="text-success mb-3">Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ</h5>
                <div class="warranty-info mb-4">
                  <div class="row g-3">
                    <div class="col-md-6">
                      <div class="d-flex align-items-center p-3 bg-light rounded">
                        <i class="text-success me-2" style="font-size: 1.5rem;">âœ“</i>
                        <div>
                          <strong>5 Ø³Ù†ÙˆØ§Øª</strong><br>
                          <small class="text-muted">Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ</small>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="d-flex align-items-center p-3 bg-light rounded">
                        <i class="text-success me-2" style="font-size: 1.5rem;">âœ“</i>
                        <div>
                          <strong>100,000 ÙƒÙ…</strong><br>
                          <small class="text-muted">Ø¶Ù…Ø§Ù† Ù‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±</small>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="d-flex align-items-center p-3 bg-light rounded">
                        <i class="text-success me-2" style="font-size: 1.5rem;">âœ“</i>
                        <div>
                          <strong>ØµÙŠØ§Ù†Ø© Ù…Ø¬Ø§Ù†ÙŠØ©</strong><br>
                          <small class="text-muted">Ù„Ø£ÙˆÙ„ 3 Ø³Ù†ÙˆØ§Øª</small>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="d-flex align-items-center p-3 bg-light rounded">
                        <i class="text-success me-2" style="font-size: 1.5rem;">âœ“</i>
                        <div>
                          <strong>Ø®Ø¯Ù…Ø© 24/7</strong><br>
                          <small class="text-muted">Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø±ÙŠÙ‚</small>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="col-lg-4">
                <div class="sticky-top">
                  <div class="card border-success">
                    <div class="card-body text-center">
                      <h4 class="text-success mb-3" id="modalCarPrice"></h4>
                      <p class="text-muted mb-3">Ø§Ù„Ø³Ø¹Ø± Ø´Ø§Ù…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³ÙˆÙ… ÙˆØ§Ù„Ø¶Ø±Ø§Ø¦Ø¨</p>
                      <div class="d-grid gap-2">
                        <button class="btn btn-success btn-lg" id="modalBuyBtn">ğŸš— Ø§Ø´ØªØ±Ù Ø§Ù„Ø¢Ù†</button>
                        <button class="btn btn-wa text-white" id="modalWhatsAppBtn">ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨</button>
                        <button class="btn btn-outline-primary" id="modalBrochureBtn">ğŸ“‹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙˆØ´ÙˆØ±</button>
                      </div>
                      <div class="mt-3 pt-3 border-top">
                        <small class="text-muted">
                          Ù…Ù† Ø§Ù„ØªÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ø¥Ù… Ø¬ÙŠ ÙÙŠ Ø§Ù„ÙƒÙˆÙŠØª
                        </small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toasts -->
  <div class="position-fixed top-0 end-0 p-3" style="z-index: 1080">
    <div id="toast" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body">
          ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø·Ù„Ø¨Ùƒ âœ… Ø§Ø¶ØºØ· <strong>Ø¥Ø±Ø³Ø§Ù„</strong> ÙÙŠ ÙˆØ§ØªØ³Ø§Ø¨. Ø¨Ø±Ø¬Ø¹ Ù„Ùƒ Ø¨Ø£Ø³Ø±Ø¹ ÙˆÙ‚Øª.
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <footer class="py-4 border-top" style="background: #ffffff;">
    <div class="container small text-center text-muted">
    Â© <span id="year"></span> <span id="footerName">Alghanim Sons Group | Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØºØ§Ù†Ù… ÙˆØ£ÙˆÙ„Ø§Ø¯Ù‡</span>. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script>
    // ====== CONFIG: EDIT THESE ======
    // Updated for Kuwait
    const CONFIG = {
      salesName: "Ahmed Abdelwahab",
      whatsappNumberE164: "96596902117",   // recipient = +965 9690 2117 (Kuwait number)
      callNumber: "+965 9690 2117",
      email: "aradwan@alghanimsons.com",
      contactPhoto: "YOUR_REAL_PHOTO_URL_HERE",
      mapEmbedSrc: "https://maps.google.com/maps?q=Alghanim+Motors+Kuwait&t=&z=13&ie=UTF8&iwloc=&output=embed",
      currencyLocale: "en-KW",
      currency: "KWD",

      themeRotateSeconds: 15,
      themes: [
        { wa: '#16a34a', primary: '#374151', dark: '#0f172a' },
        { wa: '#15803d', primary: '#4b5563', dark: '#0f172a' },
        { wa: '#059669', primary: '#6b7280', dark: '#0f172a' },
        { wa: '#047857', primary: '#1f2937', dark: '#0f172a' }
      ]
    };

    const FINANCING_COMPANIES = [
      { name: "Ø´Ø±ÙƒØ© Ø§Ù„ØªØ³Ù‡ÙŠÙ„Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©", rate: 6.5 },
      { name: "Ø´Ø±ÙƒØ© ØªØ³Ù‡ÙŠÙ„Ø§Øª Ø§Ù„Ø³Ø§ÙŠØ±", rate: 8.5 },
      { name: "Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ù†Ø§Ø± Ù„Ù„Ø¥ÙŠØ¬Ø§Ø±Ø©", rate: 7.0 }
    ];

    const CARS = [
      {
        id: "mgrx9_2025",
        name: "MG RX9 2025",
        price: 3499,
        condition: "new",
        category: "premium",
        image: "images/mg-rx9/mg-rx9.avif",
        imageFolder: "images/mg-rx9/",
        images: ["mg-rx9.avif", "mg-rx92.avif", "mg-rx93.avif", "mg-rx94.avif", "mg_rx9.avif", "mg_rx9_37.avif"],
        features: ["Ù…Ø­Ø±Ùƒ 2.0 ØªÙŠØ±Ø¨Ùˆ Ù‚ÙˆÙŠ", "Ù†Ø¸Ø§Ù… Ø¯ÙØ¹ Ø±Ø¨Ø§Ø¹ÙŠ AWD", "ÙØªØ­Ø© Ø³Ù‚Ù Ø¨Ø§Ù†ÙˆØ±Ø§Ù…ÙŠØ©", "Ù†Ø¸Ø§Ù… Ù…Ù„Ø§Ø­Ø© Ø°ÙƒÙŠ", "Ù…Ù‚Ø§Ø¹Ø¯ Ø¬Ù„Ø¯ÙŠØ© ÙØ§Ø®Ø±Ø©", "Ù†Ø¸Ø§Ù… ØµÙˆØªÙŠ Ù…ØªØ·ÙˆØ±"],
        description: "Ø¥Ù… Ø¬ÙŠ Ø¢Ø± Ø¥ÙƒØ³ 9 - Ø³ÙŠØ§Ø±Ø© SUV ÙØ§Ø®Ø±Ø© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù†Ø§Ù‚Ø© ÙˆØ§Ù„Ù‚ÙˆØ©. Ù…Ø¬Ù‡Ø²Ø© Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª ÙˆØ£Ù†Ø¸Ù…Ø© Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©.",
        brochure: "broushors/mg_rx9_brochure_en_v6.pdf"
      },
      {
        id: "mg5_2025",
        name: "MG 5 2025",
        price: 3599,
        condition: "new",
        category: "new",
        image: "images/mg-5/mg-5.avif",
        imageFolder: "images/mg-5/",
        images: ["mg-5.avif", "mg-52.avif", "mg-53.avif", "mg-54.avif", "mg-55.avif"],
        features: ["Ù…Ø­Ø±Ùƒ 1.5 Ù„ØªØ± Ø§Ù‚ØªØµØ§Ø¯ÙŠ", "Ù†Ø§Ù‚Ù„ Ø­Ø±ÙƒØ© CVT", "Ø´Ø§Ø´Ø© Ù„Ù…Ø³ 10 Ø¨ÙˆØµØ©", "Ù†Ø¸Ø§Ù… Ø£Ù…Ø§Ù† Ù…ØªÙ‚Ø¯Ù…", "Ù…Ù‚Ø§Ø¹Ø¯ Ù…Ø±ÙŠØ­Ø©", "Ù†Ø¸Ø§Ù… ØªÙƒÙŠÙŠÙ Ø°ÙƒÙŠ"],
        description: "Ø¥Ù… Ø¬ÙŠ 5 - Ø³ÙŠØ§Ø±Ø© Ø³ÙŠØ¯Ø§Ù† Ø¹ØµØ±ÙŠØ© ÙˆØ§Ù‚ØªØµØ§Ø¯ÙŠØ©. Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª ÙˆØ§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ.",
        brochure: "broushors/mg_5_brochure_en_v03_lowres_1_.pdf"
      },
      {
        id: "mg4_electric_2025",
        name: "MG 4 Electric 2025",
        price: 8900,
        condition: "new",
        category: "electric",
        image: "images/mg-4/mg-4.avif",
        imageFolder: "images/mg-4/",
        images: ["mg-4.avif", "mg-42.avif", "mg-43.avif", "mg-44.avif", "mg-45.avif", "mg-ev.avif"],
        features: ["Ù…Ø­Ø±Ùƒ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ Ù‚ÙˆÙŠ", "Ù…Ø¯Ù‰ 450 ÙƒÙ…", "Ø´Ø­Ù† Ø³Ø±ÙŠØ¹ DC", "Ø£Ù†Ø¸Ù…Ø© Ø°ÙƒÙŠØ©", "ØµØ¯ÙŠÙ‚ Ù„Ù„Ø¨ÙŠØ¦Ø©", "ØªÙ‚Ù†ÙŠØ© Ù…ØªØ·ÙˆØ±Ø©"],
        description: "Ø¥Ù… Ø¬ÙŠ 4 Ø§Ù„ÙƒØªØ±ÙŠÙƒ - Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©. Ø³ÙŠØ§Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø¹ Ù…Ø¯Ù‰ Ø·ÙˆÙŠÙ„ ÙˆØ´Ø­Ù† Ø³Ø±ÙŠØ¹.",
        brochure: "broushors/mg_4_brochure_eng_v6.pdf"
      },
      {
        id: "mg7_2025",
        name: "MG 7 1.5 Turbo 2025",
        price: 6399,
        condition: "new",
        category: "premium",
        image: "images/mg-7/mg-7.avif",
        imageFolder: "images/mg-7/",
        images: ["mg-7.avif", "mg-72.avif", "mg-73.avif", "mg-74.avif", "mg-75.avif", "mg-76.avif", "mg76.avif"],
        features: ["Ù…Ø­Ø±Ùƒ 1.5 ØªÙŠØ±Ø¨Ùˆ", "Ù‚ÙˆØ© 170 Ø­ØµØ§Ù†", "Ù†Ø§Ù‚Ù„ Ø­Ø±ÙƒØ© CVT", "Ù…Ù‚Ø§Ø¹Ø¯ Ø¬Ù„Ø¯ÙŠØ© ÙØ§Ø®Ø±Ø©", "Ø´Ø§Ø´Ø© Ù„Ù…Ø³ 12.3 Ø¨ÙˆØµØ©", "Ù†Ø¸Ø§Ù… ØµÙˆØªÙŠ Ù…ØªØ·ÙˆØ±", "ÙØªØ­Ø© Ø³Ù‚Ù"],
        description: "Ø¥Ù… Ø¬ÙŠ 7 ØªÙŠØ±Ø¨Ùˆ 1.5 - Ø³ÙŠØ§Ø±Ø© Ø³ÙŠØ¯Ø§Ù† ÙØ§Ø®Ø±Ø© Ø¨Ù…Ø­Ø±Ùƒ ØªÙŠØ±Ø¨Ùˆ Ø§Ù‚ØªØµØ§Ø¯ÙŠ. ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ø§Ù‚ØªØµØ§Ø¯ ÙÙŠ Ø§Ù„ÙˆÙ‚ÙˆØ¯.",
        brochure: "broushors/mg_7_brochure.pdf"
      },
      {
        id: "mg7_turbo_2025",
        name: "MG 7 2.0 Turbo 2025",
        price: 7299,
        condition: "new",
        category: "premium",
        image: "mg-7 2.0 turbo.webp",
        imageFolder: "images/mg-7/",
        images: ["mg-7 2.0 turbo.webp", "mg-72.avif", "mg-7.avif", "mg-73.avif", "mg-74.avif", "mg-75.avif", "mg-76.avif", "mg76.avif"],
        features: ["Ù…Ø­Ø±Ùƒ 2.0 ØªÙŠØ±Ø¨Ùˆ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø£Ø¯Ø§Ø¡", "Ù‚ÙˆØ© 245 Ø­ØµØ§Ù†", "Ù†Ø¸Ø§Ù… Ø¯ÙØ¹ Ø±Ø¨Ø§Ø¹ÙŠ AWD", "Ù…Ù‚Ø§Ø¹Ø¯ Ø¬Ù„Ø¯ÙŠØ© Ø±ÙŠØ§Ø¶ÙŠØ©", "Ø´Ø§Ø´Ø© Ù„Ù…Ø³ 12.3 Ø¨ÙˆØµØ©", "Ù†Ø¸Ø§Ù… Ù‚ÙŠØ§Ø¯Ø© Ø±ÙŠØ§Ø¶ÙŠØ©", "ÙØªØ­Ø© Ø³Ù‚Ù Ø¨Ø§Ù†ÙˆØ±Ø§Ù…ÙŠØ©", "Ù†Ø¸Ø§Ù… ØµÙˆØªÙŠ BOSE ÙØ§Ø¦Ù‚"],
        description: "Ø¥Ù… Ø¬ÙŠ 7 ØªÙŠØ±Ø¨Ùˆ - Ù†Ø³Ø®Ø© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø£Ø¯Ø§Ø¡ Ù…Ù† Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ÙØ§Ø®Ø±Ø©. Ù…Ø­Ø±Ùƒ ØªÙŠØ±Ø¨Ùˆ Ù‚ÙˆÙŠ ÙˆÙ…ÙˆØ§ØµÙØ§Øª Ø±ÙŠØ§Ø¶ÙŠØ© Ù…ØªØ·ÙˆØ±Ø©.",
        brochure: "broushors/mg_7_brochure.pdf"
      },
      {
        id: "mg3_2025",
        name: "MG 3 2025",
        price: 3499,
        condition: "new",
        category: "new",
        image: "images/mg-3/mg-33.avif",
        imageFolder: "images/mg-3/",
        images: ["mg-33.avif", "mg-35.avif", "mg_32.avif", "02.avif"],
        features: ["Ù…Ø­Ø±Ùƒ 1.5 Ù„ØªØ±", "Ù†Ø§Ù‚Ù„ Ø­Ø±ÙƒØ© ÙŠØ¯ÙˆÙŠ", "ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ", "Ù†Ø¸Ø§Ù… Ø£Ù…Ø§Ù† Ø£Ø³Ø§Ø³ÙŠ", "Ø§Ù‚ØªØµØ§Ø¯ÙŠ ÙÙŠ Ø§Ù„ÙˆÙ‚ÙˆØ¯", "Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„Ù…Ø¯ÙŠÙ†Ø©"],
        description: "Ø¥Ù… Ø¬ÙŠ 3 - Ø³ÙŠØ§Ø±Ø© Ù…Ø¯Ù…Ø¬Ø© Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ù‚ØªØµØ§Ø¯ÙŠØ©. Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ø´Ø¨Ø§Ø¨ ÙˆØ§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©."
      },
      {
        id: "mg_whale_2025",
        name: "MG Whale 2025",
        price: 7777,
        condition: "new",
        category: "premium",
        image: "images/mg-rx9/mg_rx9.avif",
        imageFolder: "images/mg-rx9/",
        images: ["mg_rx9.avif", "mg-rx9.avif", "mg-rx92.avif", "mg-rx93.avif"],
        features: ["Ù…Ø­Ø±Ùƒ Ù‡Ø¬ÙŠÙ† Ù‚ÙˆÙŠ", "Ø³ÙŠØ§Ø±Ø© SUV ÙØ§Ø®Ø±Ø©", "Ù…Ù‚Ø§Ø¹Ø¯ 7 Ø±Ø§ÙƒØ¨", "Ù†Ø¸Ø§Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ØªØ·ÙˆØ±", "ÙØªØ­Ø© Ø³Ù‚Ù Ø¨Ø§Ù†ÙˆØ±Ø§Ù…ÙŠØ©", "Ù†Ø¸Ø§Ù… Ù‚ÙŠØ§Ø¯Ø© Ø°ÙƒÙŠØ©"],
        description: "Ø¥Ù… Ø¬ÙŠ ÙˆÙŠÙ„ - Ø£ÙƒØ¨Ø± ÙˆØ£ÙØ®Ù… Ø³ÙŠØ§Ø±Ø§Øª Ø¥Ù… Ø¬ÙŠ. SUV ÙØ§Ø®Ø±Ø© Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©."
      },
      {
        id: "mg_one_2025",
        name: "MG One 2025",
        price: 6666,
        condition: "new",
        category: "new",
        image: "images/mg-one/mg-one.avif",
        imageFolder: "images/mg-one/",
        images: ["mg-one.avif", "mg-one2.avif", "mg-one3.avif", "mg-one4.avif", "mg-one5.avif"],
        features: ["Ù…Ø­Ø±Ùƒ 1.5 ØªÙŠØ±Ø¨Ùˆ", "Ù†Ø¸Ø§Ù… Ø¯ÙØ¹ Ø£Ù…Ø§Ù…ÙŠ", "Ø´Ø§Ø´Ø© Ù„Ù…Ø³ Ø°ÙƒÙŠØ©", "Ù†Ø¸Ø§Ù… Ø£Ù…Ø§Ù† Ù…ØªÙ‚Ø¯Ù…", "Ù…Ù‚Ø§Ø¹Ø¯ Ù…Ø±ÙŠØ­Ø©", "ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ"],
        description: "Ø¥Ù… Ø¬ÙŠ ÙˆÙ† - SUV Ù…Ø¯Ù…Ø¬Ø© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ù„Ø£Ù†Ø§Ù‚Ø©. Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª Ø§Ù„Ø¹ØµØ±ÙŠØ©.",
        brochure: "broushors/mg_one_brochure_english.pdf"
      },
      {
        id: "mg_rx5_2025",
        name: "MG RX5 2025",
        price: 5999,
        condition: "new",
        category: "new",
        image: "images/mg-rx5/mg-rx5.avif",
        imageFolder: "images/mg-rx5/",
        images: ["mg-rx5.avif", "mg-rx52.avif", "mg-rx53.avif"],
        features: ["Ù…Ø­Ø±Ùƒ 1.5 ØªÙŠØ±Ø¨Ùˆ", "Ù†Ø¸Ø§Ù… Ø¯ÙØ¹ Ø±Ø¨Ø§Ø¹ÙŠ", "Ø´Ø§Ø´Ø© Ù„Ù…Ø³ 10.1 Ø¨ÙˆØµØ©", "Ù†Ø¸Ø§Ù… Ù…Ù„Ø§Ø­Ø©", "Ù…Ù‚Ø§Ø¹Ø¯ Ù…Ø±ÙŠØ­Ø©", "Ù†Ø¸Ø§Ù… Ù‚ÙŠØ§Ø¯Ø© Ù…Ø³Ø§Ø¹Ø¯"],
        description: "Ø¥Ù… Ø¬ÙŠ Ø¢Ø± Ø¥ÙƒØ³ 5 - SUV Ù…ØªØ·ÙˆØ±Ø© Ø¨ØªÙ‚Ù†ÙŠØ§Øª Ø°ÙƒÙŠØ©. Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ø±Ø­Ù„Ø§Øª ÙˆØ§Ù„Ù…ØºØ§Ù…Ø±Ø§Øª.",
        brochure: "broushors/mg_rx5_brochure_eng_regional_smme.pdf"
      },
      {
        id: "mg_gt_2025",
        name: "MG GT 2025",
        price: 5499,
        condition: "new",
        category: "premium",
        image: "images/mg-gt/mg-gt.avif",
        imageFolder: "images/mg-gt/",
        images: ["mg-gt.avif", "mg-gt2.avif", "mg-gt3.avif"],
        features: ["Ù…Ø­Ø±Ùƒ V6 Ù‚ÙˆÙŠ", "Ø¯ÙØ¹ Ø®Ù„ÙÙŠ Ø±ÙŠØ§Ø¶ÙŠ", "Ù…Ù‚Ø§Ø¹Ø¯ Ø¬Ù„Ø¯ÙŠØ© Ø±ÙŠØ§Ø¶ÙŠØ©", "Ù†Ø¸Ø§Ù… ØªØ¹Ù„ÙŠÙ‚ Ø±ÙŠØ§Ø¶ÙŠ", "Ø´Ø§Ø´Ø© Ù„Ù…Ø³ Ù…ØªØ·ÙˆØ±Ø©", "Ø£Ù†Ø¸Ù…Ø© Ù‚ÙŠØ§Ø¯Ø© Ø±ÙŠØ§Ø¶ÙŠØ©"],
        description: "Ø¥Ù… Ø¬ÙŠ Ø¬ÙŠ ØªÙŠ - ÙƒÙˆØ¨ÙŠÙ‡ Ø±ÙŠØ§Ø¶ÙŠØ© Ø£Ù†ÙŠÙ‚Ø©. ØªØµÙ…ÙŠÙ… Ø¬Ø°Ø§Ø¨ Ù…Ø¹ Ø£Ø¯Ø§Ø¡ Ø±ÙŠØ§Ø¶ÙŠ Ù…Ù…ÙŠØ² Ù„Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø­Ù…Ø§Ø³ÙŠØ©.",
        brochure: "broushors/mg_gt_leaflet_english_aw_ol_optimized_new.pdf"
      },
      {
        id: "mgzs_2025",
        name: "MG ZS 2025",
        price: 4444,
        condition: "new",
        category: "new",
        image: "images/mg-zs/mg-zs.avif",
        imageFolder: "images/mg-zs/",
        images: ["mg-zs.avif", "mg-zs2.avif", "mg-zs3.avif", "mg-zs4.avif"],
        features: ["Ù…Ø­Ø±Ùƒ 1.5 Ù„ØªØ±", "SUV Ù…Ø¯Ù…Ø¬Ø©", "Ø´Ø§Ø´Ø© Ù„Ù…Ø³ 8 Ø¨ÙˆØµØ©", "Ù†Ø¸Ø§Ù… Ø£Ù…Ø§Ù† Ø£Ø³Ø§Ø³ÙŠ", "Ù…Ø³Ø§Ø­Ø© ØªØ®Ø²ÙŠÙ† ÙƒØ¨ÙŠØ±Ø©", "Ø§Ù‚ØªØµØ§Ø¯ÙŠ ÙÙŠ Ø§Ù„ÙˆÙ‚ÙˆØ¯"],
        description: "Ø¥Ù… Ø¬ÙŠ Ø²Ø¯ Ø¥Ø³ - SUV Ù…Ø¯Ù…Ø¬Ø© Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ù‚ØªØµØ§Ø¯ÙŠØ©. Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª ÙˆØ§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ ÙÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©.",
        brochure: "broushors/mg_zs_brochure_eng_v1.3_new_1_.pdf"
      },
      {
        id: "mghs_2025",
        name: "MG HS 2025",
        price: 6999,
        condition: "new",
        category: "new",
        image: "images/mg-hs images/mg-hs.avif",
        imageFolder: "images/mg-hs images/",
        images: ["mg-hs.avif", "mg-hs2.avif", "mg-hs3.avif", "mg-hs4.avif"],
        features: ["Ù…Ø­Ø±Ùƒ 2.0 ØªÙŠØ±Ø¨Ùˆ", "Ù†Ø¸Ø§Ù… Ø¯ÙØ¹ Ø±Ø¨Ø§Ø¹ÙŠ AWD", "Ø´Ø§Ø´Ø© Ù„Ù…Ø³ 12.3 Ø¨ÙˆØµØ©", "Ù†Ø¸Ø§Ù… Ù…Ù„Ø§Ø­Ø© Ù…ØªØ·ÙˆØ±", "Ù…Ù‚Ø§Ø¹Ø¯ Ø¬Ù„Ø¯ÙŠØ© Ù…Ø¯ÙØ£Ø©", "Ù†Ø¸Ø§Ù… Ø£Ù…Ø§Ù† Ø´Ø§Ù…Ù„"],
        description: "Ø¥Ù… Ø¬ÙŠ Ø¥ØªØ´ Ø¥Ø³ - SUV Ù…ØªÙˆØ³Ø·Ø© ÙØ§Ø®Ø±Ø© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø±Ø§Ø­Ø© ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡. Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª Ø§Ù„ØªÙŠ ØªØ¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ®Ø§Ù…Ø© ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ©.",
        brochure: "broushors/mg_hs_brochure_en_r07_lowres.pdf"
      }
    ];
    // ====== END CONFIG ======

    const $  = (sel, ctx=document) => ctx.querySelector(sel);
    const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));
    const money = (v) => new Intl.NumberFormat(CONFIG.currencyLocale, { style: 'currency', currency: CONFIG.currency }).format(v);

    // Populate financing companies and years
    function initFinanceOptions() {
      const companySelect = $('#bankSelect');
      FINANCING_COMPANIES.forEach(company => {
        const opt = document.createElement("option");
        opt.value = `${company.name} (${company.rate}%)`;
        opt.textContent = `${company.name} - ${company.rate}%`;
        opt.setAttribute('data-rate', company.rate);
        companySelect.appendChild(opt);
      });
      const yearsSelect = $('#loanYears');
      for (let y=1; y<=4; y++) {
        const opt = document.createElement("option");
        opt.value = String(y); opt.textContent = `${y} Ø³Ù†Ø©`;
        yearsSelect.appendChild(opt);
      }
    }

    function carBadge(condition, category) {
      if (category === 'premium') {
        return `<span class="badge" style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; font-weight: 600;">Premium MG</span>`;
      } else if (category === 'electric') {
        return `<span class="badge" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; font-weight: 600;">Electric MG</span>`;
      } else {
        return `<span class="badge" style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%); color: white; font-weight: 600;">New MG 2025</span>`;
      }
    }

    function renderCars(list) {
      const grid = $('#carsGrid');
      grid.innerHTML = "";
      if (!list.length) {
        grid.innerHTML = `<div class="col-12"><div class="alert alert-warning">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ÙŠØ§Ø±Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ø¨Ø­Ø«Ùƒ.</div></div>`;
        return;
      }
      list.forEach(car => {
        const col = document.createElement("div");
        col.className = "col-12 col-sm-6 col-lg-4";
        col.innerHTML = `
          <div class="card h-100 shadow-soft car-card" data-car-id="${car.id}" style="cursor: pointer;">
            <div class="img-wrap">
              <img src="${car.image}" alt="${car.name}" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
              <div style="display:none; justify-content:center; align-items:center; background:#f8f9fa; color:#6b7280; font-size:14px; text-align:center; padding:2rem;">
                <div>
                  <div style="font-size:2rem; margin-bottom:0.5rem;">ğŸš—</div>
                  <div>ØµÙˆØ±Ø© ${car.name}</div>
                </div>
              </div>
              <span class="price-badge">${money(car.price)}</span>
              <div class="position-absolute top-0 end-0 p-2">
                ${carBadge(car.condition, car.category)}
              </div>
              <div class="position-absolute bottom-0 start-0 p-3">
                <small class="text-white bg-dark px-2 py-1 rounded" style="background: rgba(0,0,0,0.7) !important;">Ø§Ø¶ØºØ· Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„</small>
              </div>
            </div>
            <div class="card-body">
              <h5 class="card-title mb-1">${car.name}</h5>
              <p class="text-muted mb-3">Ø³ÙŠØ§Ø±Ø© Ø¥Ù… Ø¬ÙŠ Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„ØªÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ Ø¨Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ ÙˆØ£Ø­Ø¯Ø« Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª ÙˆØ®Ø¯Ù…Ø§Øª Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø­ØµØ±ÙŠØ©.</p>
              <div class="buy-wrap d-grid">
                <button class="btn btn-primary fw-semibold" data-car="${car.name}" data-bs-toggle="modal" data-bs-target="#purchaseModal">ğŸš— Ø§Ø´ØªØ±Ù Ø§Ù„Ø¢Ù†</button>
              </div>
            </div>
          </div>`;
        grid.appendChild(col);
      });
    }

    function attachBuyButtons() {
      $('#carsGrid').addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-car]');
        const card = e.target.closest('.car-card[data-car-id]');
        
        if (btn) {
          $('#carName').value = btn.getAttribute('data-car');
        } else if (card) {
          // Open car details modal
          const carId = card.getAttribute('data-car-id');
          const car = CARS.find(c => c.id === carId);
          if (car) {
            showCarDetails(car);
          }
        }
      });
    }
    
    function showCarDetails(car) {
      // Set car name and price
      $('#modalCarName').textContent = car.name;
      $('#modalCarPrice').textContent = money(car.price);
      $('#modalCarBadge').innerHTML = carBadge(car.condition, car.category);
      
      // Set features
      const featuresHtml = car.features ? car.features.map(f => `<li class="mb-2"><i class="text-success me-2">âœ“</i>${f}</li>`).join('') : '<li>Ù…ÙˆØ§ØµÙØ§Øª Ù…ØªÙ…ÙŠØ²Ø©</li>';
      $('#carFeatures').innerHTML = `<ul class="list-unstyled">${featuresHtml}</ul>`;
      
      // Load images carousel
      loadCarImages(car);
      
      // Set up buy button
      $('#modalBuyBtn').onclick = () => {
        $('#carName').value = car.name;
        const detailsModal = bootstrap.Modal.getInstance($('#carDetailsModal'));
        detailsModal.hide();
        setTimeout(() => {
          new bootstrap.Modal($('#purchaseModal')).show();
        }, 300);
      };
      
      // Set up WhatsApp button
      $('#modalWhatsAppBtn').onclick = () => {
        const message = `Ù…Ø±Ø­Ø¨Ø§ØŒ Ø£Ø±ÙŠØ¯ Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† ${car.name} - Ø§Ù„Ø³Ø¹Ø±: ${money(car.price)}`;
        window.open(whatsappURL(message), '_blank');
      };
      
      // Set up Brochure download button
      const brochureBtn = $('#modalBrochureBtn');
      if (car.brochure) {
        brochureBtn.style.display = 'block';
        brochureBtn.onclick = () => {
          // Create a temporary anchor element to trigger download
          const link = document.createElement('a');
          link.href = car.brochure;
          link.download = car.brochure.split('/').pop(); // Use filename from path
          link.target = '_blank';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        };
      } else {
        brochureBtn.style.display = 'none';
      }
      
      // Show modal
      new bootstrap.Modal($('#carDetailsModal')).show();
    }
    
    function loadCarImages(car) {
      const carouselImages = $('#carouselImages');
      const carouselIndicators = $('#carouselIndicators');
      
      carouselImages.innerHTML = '';
      carouselIndicators.innerHTML = '';
      
      const images = car.images || [car.image.split('/').pop()];
      const imageFolder = car.imageFolder || car.image.substring(0, car.image.lastIndexOf('/') + 1);
      
      images.forEach((img, index) => {
        // Create carousel item
        const item = document.createElement('div');
        item.className = `carousel-item ${index === 0 ? 'active' : ''}`;
        item.innerHTML = `
          <img src="${imageFolder}${img}" class="d-block w-100" alt="${car.name}" style="height: 400px; object-fit: cover;" 
               onerror="this.style.display='none'">
        `;
        carouselImages.appendChild(item);
        
        // Create indicator
        const indicator = document.createElement('button');
        indicator.type = 'button';
        indicator.setAttribute('data-bs-target', '#carImageCarousel');
        indicator.setAttribute('data-bs-slide-to', index.toString());
        indicator.className = index === 0 ? 'active' : '';
        indicator.setAttribute('aria-label', `Slide ${index + 1}`);
        if (index === 0) indicator.setAttribute('aria-current', 'true');
        carouselIndicators.appendChild(indicator);
      });
    }

    function setupSearchFilter() {
      const input = $('#searchInput');
      const select = $('#filterSelect');
      const apply = () => {
        const q = input.value.trim().toLowerCase();
        const f = select.value;
        const filtered = CARS.filter(c => {
          const matchQ = !q || c.name.toLowerCase().includes(q);
          const matchF = f === 'all' || c.category === f;
          return matchQ && matchF;
        });
        renderCars(filtered);
      };
      input.addEventListener('input', apply);
      select.addEventListener('change', apply);
    }

    // Payment toggle and finance calculator
    function setupPaymentToggleV2() {
      const financeFields = $('#financeFields');
      const bankSelect = $('#bankSelect');
      const yearsSelect = $('#loanYears');
      const apr = $('#apr');
      const down = $('#downPayment');
      const emiOut = $('#emi');
      const budget = $('#budget');
      const totalPayable = $('#totalPayable');
      const totalInterest = $('#totalInterest');
      const budgetStatus = $('#budgetStatus');

      function update(){
        const method = document.querySelector('input[name="paymentMethod"]:checked').value;
        const show = method === 'Finance';
        financeFields.style.display = show ? 'block' : 'none';
        bankSelect.required = show; yearsSelect.required = show;
        if(!show){
          bankSelect.value=''; yearsSelect.value=''; emiOut.value=''; totalPayable.value=''; totalInterest.value='';
          budget.value=''; budgetStatus.textContent='â€”'; budgetStatus.style.color=''; budgetStatus.style.background='';
        } else calc();
      }

      function calc(){
        const carName = $('#carName').value;
        const car = CARS.find(c=>c.name===carName);
        if(!car) { 
          emiOut.value=''; totalPayable.value=''; totalInterest.value=''; budgetStatus.textContent='â€”'; 
          return; 
        }
        
        const carPrice = car.price;
        const downPayment = parseFloat(down.value) || 0;
        const principal = Math.max(0, carPrice - downPayment);
        const years = parseInt(yearsSelect.value) || 0;
        
        // Get interest rate from selected financing company
        const selectedOption = bankSelect.options[bankSelect.selectedIndex];
        const annualRate = selectedOption ? parseFloat(selectedOption.getAttribute('data-rate')) : 0;
        
        // Update APR display
        apr.value = annualRate || '';
        
        // Validate inputs
        if (!principal || !years || !annualRate || !bankSelect.value) { 
          emiOut.value=''; totalPayable.value=''; totalInterest.value=''; budgetStatus.textContent='â€”'; 
          return; 
        }
        
        // Convert annual rate to monthly rate
        const monthlyRate = annualRate / 100 / 12;
        const totalMonths = years * 12;
        
        // Calculate EMI using accurate formula
        // EMI = P Ã— r Ã— (1 + r)^n / [(1 + r)^n - 1]
        const numerator = principal * monthlyRate * Math.pow(1 + monthlyRate, totalMonths);
        const denominator = Math.pow(1 + monthlyRate, totalMonths) - 1;
        const monthlyEMI = numerator / denominator;
        
        // Calculate totals
        const totalAmount = monthlyEMI * totalMonths;
        const totalInterest = totalAmount - principal;
        
        // Display results
        emiOut.value = money(Math.round(monthlyEMI));
        totalPayable.value = money(Math.round(totalAmount + downPayment)); // Include down payment in total
        totalInterest.value = money(Math.round(totalInterest));
        
        // Budget comparison
        const budgetAmount = parseFloat(budget.value) || 0;
        if (budgetAmount > 0) {
          const difference = budgetAmount - monthlyEMI;
          if (difference >= 0) {
            budgetStatus.textContent = `Ø¶Ù…Ù† Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© âœ… (ØªÙˆÙÙ‘Ø± ${money(Math.round(difference))} Ø¨Ø§Ù„Ø´Ù‡Ø±)`;
            budgetStatus.style.background = '#e8fff2';
            budgetStatus.style.color = '#065f46';
          } else {
            budgetStatus.textContent = `ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© âŒ Ø¨Ù…Ù‚Ø¯Ø§Ø± ${money(Math.round(-difference))} Ø¨Ø§Ù„Ø´Ù‡Ø±`;
            budgetStatus.style.background = '#fff1f2';
            budgetStatus.style.color = '#9f1239';
          }
        } else { 
          budgetStatus.textContent = 'â€”'; 
          budgetStatus.style.color = ''; 
          budgetStatus.style.background = ''; 
        }
      }

      document.querySelectorAll('input[name="paymentMethod"]').forEach(r => r.addEventListener('change', update));
      [bankSelect, yearsSelect, down, budget].forEach(el=> el.addEventListener('change', calc));
      [down, budget].forEach(el=> el.addEventListener('input', calc));
      update();
    }

    function whatsappURL(message) {
      const base = `https://wa.me/${CONFIG.whatsappNumberE164}`;
      return `${base}?text=${encodeURIComponent(message)}`;
    }

    function setupForm() {
      const form = $('#purchaseForm');
      const toastEl = $('#toast');
      const toast = new bootstrap.Toast(toastEl, { delay: 4000 });
      const modalEl = $('#purchaseModal');
      const modal = bootstrap.Modal.getOrCreateInstance(modalEl);

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        e.stopPropagation();

        if (!form.checkValidity()) {
          form.classList.add('was-validated');
          return;
        }

        const car = $('#carName').value.trim();
        const name = $('#custName').value.trim();
        const phone = $('#custPhone').value.trim();
        const method = document.querySelector('input[name="paymentMethod"]:checked').value;
        const financingCompany = $('#bankSelect').value;
        const years = $('#loanYears').value;

        let lines = [
          `Ø·Ù„Ø¨ Ø³ÙŠØ§Ø±Ø© Ø¥Ù… Ø¬ÙŠ Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„ØªÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ - Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØºØ§Ù†Ù… Ø§Ù„ÙƒÙˆÙŠØª:`,
          `- Ø§Ù„Ø¹Ù…ÙŠÙ„: ${name}`,
          `- Ø§Ù„Ø±Ù‚Ù…: ${phone}`,
          `- Ø§Ù„Ø³ÙŠØ§Ø±Ø©: ${car}`,
          `- Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${method === 'Finance' ? 'ØªÙ…ÙˆÙŠÙ„' : 'ÙƒØ§Ø´'}`
        ];
        if (method === 'Finance') {
          lines.push(`- Ø´Ø±ÙƒØ© Ø§Ù„ØªÙ…ÙˆÙŠÙ„: ${financingCompany}`);
          lines.push(`- Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ù†ÙˆØ§Øª: ${years}`);
          const aprVal = $('#apr').value;
          const downVal = $('#downPayment').value;
          const budgetVal = $('#budget').value;
          const totalVal = $('#totalPayable').value;
          const interestVal = $('#totalInterest').value;
          const emiVal = $('#emi').value;
          lines.push(`- Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø©: ${aprVal}%`);
          lines.push(`- Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: ${downVal} Ø¯.Ùƒ`);
          if(budgetVal) lines.push(`- Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ù…Ø±ØºÙˆØ¨: ${budgetVal} Ø¯.Ùƒ`);
          if(emiVal) lines.push(`- Ø§Ù„Ù‚Ø³Ø· Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ: ${emiVal}`);
          if(totalVal) lines.push(`- Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ: ${totalVal}`);
          if(interestVal) lines.push(`- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§Ø¦Ø¯: ${interestVal}`);
        }
        const message = lines.join('\n');

        try { await navigator.clipboard.writeText(message); } catch {}

        const url = whatsappURL(message);
        window.open(url, '_blank', 'noopener');

        toast.show();
        form.reset();
        form.classList.remove('was-validated');
        document.querySelectorAll('input[name="paymentMethod"]').forEach(r => r.checked = r.id === 'payCash');
        $('#bankSelect').value = "";
        $('#loanYears').value = "";
        $('#financeFields').style.display = 'none';
        modal.hide();
      });
    }

    function wireCTAs() {
      const waLink = `https://wa.me/${CONFIG.whatsappNumberE164}`;
      const msg = encodeURIComponent("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø£Ø­Ù…Ø¯! Ù…Ù‡ØªÙ… Ø¨Ø³ÙŠØ§Ø±Ø§Øª Ø¥Ù… Ø¬ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„ØªÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø³Ù…ÙŠ - Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØºØ§Ù†Ù… Ø¨Ø§Ù„ÙƒÙˆÙŠØª.");
      ['ctaWhatsAppTop','ctaWhatsAppHero','ctaWhatsAppContact','fabWhatsApp'].forEach(id=>{
        const el = document.getElementById(id);
        if(el) el.href = `${waLink}?text=${msg}`;
      });
      $('#ctaCall').href = `tel:${CONFIG.callNumber.replace(/\s+/g,'')}`;
      $('#ctaEmail').href = `mailto:aradwan@alghanimsons.com`;
      $('#salesName').textContent = 'Ahmed Abdelwahab';
      $('#footerName').textContent = 'Alghanim Sons Group | Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØºØ§Ù†Ù… ÙˆØ£ÙˆÙ„Ø§Ø¯Ù‡';
      $('#contactPhoto').src = CONFIG.contactPhoto;
      $('#mapEmbed').src = CONFIG.mapEmbedSrc;
      $('#year').textContent = new Date().getFullYear();
    }

    // Theme rotation
    function startThemeRotation(){
      try{
        const metaTheme = document.querySelector('meta[name="theme-color"]');
        let idx = 0;
        const apply = (t)=>{
          document.documentElement.style.setProperty('--wa', t.wa);
          document.documentElement.style.setProperty('--primary', t.primary || '#3b82f6');
          document.documentElement.style.setProperty('--dark', t.dark || '#0f172a');
          if(metaTheme) metaTheme.setAttribute('content', t.wa);
        };
        const list = CONFIG.themes || [];
        if(!list.length) return;
        apply(list[0]);
        setInterval(()=>{ idx = (idx+1)%list.length; apply(list[idx]); }, (CONFIG.themeRotateSeconds||12)*1000);
      }catch(e){ console.warn('Theme rotation failed', e); }
    }

    // Self-tests
    function runSelfTests(){
      try {
        const msg = ['Line1','Line2','Line3'].join('\n');
        console.assert(msg.includes('\n'), 'Message should include \\n');
        const encoded = encodeURIComponent(msg);
        console.assert(encoded.includes('%0A'), 'Encoded should include %0A');
        const url = `https://wa.me/201000000000?text=${encoded}`;
        console.assert(url.includes('%0A'), 'URL carries encoded newlines');
        const fab = document.getElementById('fabWhatsApp');
        console.assert(!!fab, 'FAB exists');
        // EMI sanity check (example: 10,000 KWD at 5% for 5 years)
        const P = 10000, annualRate = 0.05, years = 5;
        const monthlyRate = annualRate / 12;
        const months = years * 12;
        const expectedEMI = P * monthlyRate * Math.pow(1 + monthlyRate, months) / (Math.pow(1 + monthlyRate, months) - 1);
        // Expected EMI should be around 188.71 KWD
        console.assert(Math.abs(Math.round(expectedEMI) - 189) <= 5, `EMI calculation test: expected ~189, got ${Math.round(expectedEMI)}`);
        console.log('%cSelf-tests passed', 'color: green;');
      } catch (err) {
        console.error('Self-tests failed', err);
      }
    }

    // Mobile-specific optimizations
    function setupMobileOptimizations() {
      // Improve touch responsiveness
      document.addEventListener('touchstart', function() {}, { passive: true });
      
      // Prevent double-tap zoom on buttons
      const buttons = document.querySelectorAll('button, .btn, .car-card');
      buttons.forEach(btn => {
        btn.addEventListener('touchend', function(e) {
          e.preventDefault();
          this.click();
        }, { passive: false });
      });
      
      // Auto-hide address bar on mobile
      window.addEventListener('load', function() {
        setTimeout(function() {
          window.scrollTo(0, 1);
        }, 100);
      });
      
      // Improve form experience on mobile
      const inputs = document.querySelectorAll('input, select, textarea');
      inputs.forEach(input => {
        input.addEventListener('focus', function() {
          // Scroll element into view on focus
          setTimeout(() => {
            this.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }, 300);
        });
      });
      
      // Better modal experience on mobile
      const modals = document.querySelectorAll('.modal');
      modals.forEach(modal => {
        modal.addEventListener('shown.bs.modal', function() {
          document.body.style.position = 'fixed';
          document.body.style.width = '100%';
        });
        modal.addEventListener('hidden.bs.modal', function() {
          document.body.style.position = '';
          document.body.style.width = '';
        });
      });
    }

    // Init
    initFinanceOptions();
    renderCars(CARS);
    attachBuyButtons();
    setupSearchFilter();
    setupPaymentToggleV2();
    setupForm();
    wireCTAs();
    startThemeRotation();
    setupMobileOptimizations();
    runSelfTests();
  </script>
</body>
</html>